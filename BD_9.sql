Use Деканат
Go

-- Если таблица(-ы) уже существует(-ют), то удаляем её(их).
If( OBJECT_ID('Деканат.Специальности', 'U')	is Not NULL )
	Drop Table Специальности;
If( OBJECT_ID('Деканат.Группы', 'U') is Not NULL )
	Drop Table Группы;
If( OBJECT_ID('Деканат.Студенты', 'U') is Not NULL )
	Drop Table Студенты;
If( OBJECT_ID('Деканат.Преподаватели', 'U') is Not NULL )
	Drop Table Преподаватели;
If( OBJECT_ID('Деканат.Дисциплины', 'U') is Not NULL )
	Drop Table Дисциплины;
If( OBJECT_ID('Деканат.Изучение', 'U') is Not NULL )
	Drop Table Изучение;
If( OBJECT_ID('Деканат.Преподавание', 'U') is Not NULL )
	Drop Table  Преподавание;
 
Use master;
Go

-- Если База данных не существует, то создаём её, а если существует - удаляем её
IF DB_ID('Деканат') is not NULL
	Drop Database Деканат;
If DB_ID('Деканат') is NULL
	Create Database Деканат;

Go
Use Деканат;
-------------------------------------------------------------------------------------------------------------------------------

Create Table Специальности(
	ID Int primary key Identity(1,1) not null,
	Шифр Varchar (20)				 not null,
	Наименование Varchar(50)		 not null,
	[Форма обучения] Varchar (10)	 not null,
	Уровень Varchar (15)			 not null,
	[Продолжительность обучения] Int not null,
	Описание Varchar (15)
);

Insert Into Специальности
	Values ('AAA', 'Информатика и вычислительная техника', 'Очная',   'Бакалавриат',  4, 'Люди'),
		   ('BBB', 'Информационные системы и технологии',  'Очная',	  'Бакалавриат',  5, 'Ещё люди'),
		   ('CCC', 'Информационная безопасность',          'Очная',	  'Бакалавриат',  4, 'Опять люди'),
		   ('DDD', 'Информатика и вычислительная техника', 'Очная',   'Магистратура', 5, 'Тоже люди');
-------------------------------------------------------------------------------------------------------------------------------

Create Table Группы(
	ID Int primary key Identity(1,1)								not null,
	Название Varchar(10)											not null,
	[ID Специальности] int FOREIGN KEY REFERENCES Специальности(ID) not null,
	Староста Int,
	Куратор Int
);

Insert Into Группы
	Values ('КИ19-06Б', 1, 612345678, 111),
		   ('КИ19-07Б', 1, 712345678, 222),
		   ('КИ19-08Б', 2, 812345678, 333),
		   ('КИ19-09Б', 4, 912345678, 444);
-------------------------------------------------------------------------------------------------------------------------------

Create Table Студенты(
	[Номер зачётной книжки] Int primary key			not null,
	Фамилия Varchar(15)								not null,
	Имя Varchar(15)									not null,
	Отчество Varchar(15)							not null,
	ID_Группы Int FOREIGN KEY REFERENCES Группы(ID) not null,
	[Год поступления] int							not null
);

Insert Into Студенты
	Values(612345678, 'Малаева',  'Полина',  'Маратовна',  1, 2019),
		  (623154849, 'Куценко',  'Никита',  'Валерьевич', 1, 2019),
		  (653490642, 'Ляхова',   'Яна',     'Николаевна', 1, 2019),
		  (642567256, 'Белоусов', 'Алексей', 'Дмитриевич', 1, 2019),

		  (712345678, 'Мяделец',   'Андрей',    'Алексеевич',    2, 2019),
		  (793765913, 'Кашапов',   'Ярослав',   'Фанизович',     2, 2019),
		  (742582342, 'Дерябкина', 'Анастасия', 'Дмитриевна',    2, 2019),
		  (768441359, 'Черных',    'Дарья',     'Александровна', 2, 2019),

		  (812345678, 'Звягин',    'Сергей', 'Алексеевич', 3, 2019),
		  (834147359, 'Пряхин',    'Максим', 'Олегович',   3, 2019),
		  (856275025, 'Сошников',  'Игорь',  'Иванович',   3, 2019),
		  (841515457, 'Лисовский', 'Илья',   'Михайлович', 3, 2019),

		  (912345678, 'Трошин',     'Владислав', 'Сергеевич',  4, 2019),
		  (929475527, 'Кудрявцев',  'Николай',   'Михайлович', 4, 2019),
		  (964183649, 'Бичаева',    'Валерия',   'Алексеевна', 4, 2019),
		  (976245726, 'Мельникова', 'Алина',     'Евгеньевна', 4, 2019)

Alter Table Группы
	ADD FOREIGN KEY (Староста) REFERENCES Студенты([Номер зачётной книжки]);
-------------------------------------------------------------------------------------------------------------------------------

Create Table Преподаватели(
	[Табельный номер] Int primary key not null,
	Фамилия Varchar(15)				  not null,
	Имя Varchar(15)					  not null,
	Отчество Varchar(15)			  not null,
	[Учёная степень] Varchar(25)	  not null,
	[Учёное звание] Varchar(25)		  not null,
	Кафедра Varchar(35)				  not null
);

Insert Into Преподаватели
	Values(111, 'Пушкарёв',   'Кирилл',    'Владимирович', 'Есть', 'Есть', 'Вычислительная техника'),
		  (222, 'Лобасов',    'Александр', 'Сергеевич',    'Нету', 'Нету', 'Физика'),
		  (333, 'Макуха',     'Любовь',    'Витальевна',   'Есть', 'Есть', 'Вычислительная техника'),
		  (444, 'English',    'Woman',     'Teacher',      'Нету', 'Нету', 'Разговорный иностранный язык'),
		  (555, 'Гува',       'Татьяна',   'Сергеевна',    'Есть', 'Есть', 'Вычислительная техника'),
		  (666, 'Кацунова',   'Анастасия', 'Сергеевна',    'Есть', 'Есть', 'Математика');

Alter Table Группы
ADD FOREIGN KEY (Куратор) REFERENCES Преподаватели([Табельный номер]);
-------------------------------------------------------------------------------------------------------------------------------

Create Table Дисциплины(
	ID Int primary key IDENTITY(1,1)						   not null,
	Название Varchar(40)									   not null,
	Специальность int FOREIGN KEY REFERENCES Специальности(ID) not null,
	Семестр Int												   not null,
	Объём Int												   not null,
	Отчётность Varchar(15)									   not null
);

Insert Into Дисциплины
	Values('Алгебра и геометрия',	  1, 1, 162, 'Экзамен'),
		  ('История',				  1, 1, 182, 'Экзамен'),
		  ('Основы программирования', 1, 1, 172, 'Зачет'),
		  ('Математический анализ',   1, 1, 182, 'Зачет'),
		  ('Математический анализ',   1, 2, 162, 'Экзамен'),
		  ('Физика',				  1, 2, 82,  'Экзамен'),
		  ('Дискретная математика',   1, 2, 152, 'Зачет'),
		  ('Программирование',		  1, 2, 182, 'Зачет'),

		  ('Алгебра и геометрия',   2, 1, 172, 'Экзамен'),
		  ('Физика',				2, 1, 72,  'Экзамен'),
		  ('История',				2, 1, 162, 'Зачет'),
		  ('Математический анализ', 2, 1, 142, 'Зачет'),
		  ('Математический анализ', 2, 2, 112, 'Экзамен'),
		  ('Программирование',		2, 2, 82,  'Экзамен'),
		  ('Иностранный язык',		2, 2, 172, 'Зачет'),
		  ('Физика',				2, 2, 72,  'Зачет'),

		  ('История',				  4, 1, 182, 'Экзамен'),
		  ('Алгебра и геометрия',	  4, 1, 162, 'Экзамен'),
		  ('Математический анализ',   4, 1, 182, 'Зачет'),
	      ('Основы программирования', 4, 1, 172, 'Зачет'),
		  ('Математический анализ',   4, 2, 162, 'Экзамен'),
		  ('Физика',				  4, 2, 82,  'Экзамен'),
		  ('Дискретная математика',   4, 2, 152, 'Зачет'),
		  ('Программирование',		  4, 2, 182, 'Зачет');

-------------------------------------------------------------------------------------------------------------------------------

Create Table Изучение(
	[Номер зачетной книжки студента] Int FOREIGN KEY REFERENCES Студенты([Номер зачётной книжки]) not null,
	ID_Дисциплины Int FOREIGN KEY REFERENCES Дисциплины(ID)										  not null,
	[Дата сдачи] Date																			  not null,
	Оценка Varchar(15)																			  not null
);

-- 1й семестр.
Insert Into Изучение
	Values(612345678, 1, '2020-01-15', 'Отлично'),
		  (623154849, 1, '2020-01-15', 'Отлично'),
		  (653490642, 1, '2020-01-15', 'Отлично'),
		  (642567256, 1, '2020-01-15', 'Хорошо'),
		  (712345678, 1, '2020-01-16', 'Хорошо'),
		  (793765913, 1, '2020-01-16', 'Отлично'),
		  (742582342, 1, '2020-01-16', 'Хорошо'),
		  (768441359, 1, '2020-01-16', 'Хорошо'),
		  (612345678, 2, '2020-01-16', 'Отлично'),
		  (623154849, 2, '2020-01-16', 'Отлично'),
		  (653490642, 2, '2020-01-16', 'Отлично'),
		  (642567256, 2, '2020-01-16', 'Хорошо'),
		  (712345678, 2, '2020-01-15', 'Хорошо'),
		  (793765913, 2, '2020-01-15', 'Отлично'),
		  (742582342, 2, '2020-01-15', 'Хорошо'),
		  (768441359, 2, '2020-01-15', 'Хорошо'),
		  (612345678, 3, '2019-12-20', 'Зачёт'),
		  (623154849, 3, '2019-12-20', 'Зачёт'),
		  (653490642, 3, '2019-12-20', 'Зачёт'),
		  (642567256, 3, '2019-12-20', 'Не зачёт'),
		  (712345678, 3, '2019-12-22', 'Зачёт'),
		  (793765913, 3, '2019-12-22', 'Зачёт'),
		  (742582342, 3, '2019-12-22', 'Зачёт'),
		  (768441359, 3, '2019-12-22', 'Не зачёт'),
		  (612345678, 4, '2019-12-23', 'Зачёт'),
		  (623154849, 4, '2019-12-23', 'Зачёт'),
		  (653490642, 4, '2019-12-23', 'Зачёт'),
		  (642567256, 4, '2019-12-23', 'Не зачёт'),
		  (712345678, 4, '2019-12-20', 'Зачёт'),
		  (793765913, 4, '2019-12-20', 'Зачёт'),
		  (742582342, 4, '2019-12-20', 'Не зачёт'),
		  (768441359, 4, '2019-12-20', 'Не зачёт'),

		  (812345678, 9, '2020-01-18', 'Хорошо'),
		  (834147359, 9, '2020-01-18', 'Отлично'),
		  (856275025, 9, '2020-01-18', 'Отлично'),
		  (841515457, 9, '2020-01-18', 'Отлично'),
		  (812345678, 10, '2020-01-19', 'Хорошо'),
		  (834147359, 10, '2020-01-19', 'Отлично'),
		  (856275025, 10, '2020-01-19', 'Отлично'),
		  (841515457, 10, '2020-01-19', 'Отлично'),
		  (812345678, 11, '2019-12-21', 'Не зачёт'),
		  (834147359, 11, '2019-12-21', 'Зачёт'),
		  (856275025, 11, '2019-12-21', 'Зачёт'),
		  (841515457, 11, '2019-12-21', 'Зачёт'),
		  (812345678, 12, '2019-12-22', 'Не зачёт'),
		  (834147359, 12, '2019-12-22', 'Зачёт'),
		  (856275025, 12, '2019-12-22', 'Зачёт'),
		  (841515457, 12, '2019-12-22', 'Не зачёт'),

		  (912345678, 17, '2020-01-17', 'Хорошо'),
		  (929475527, 17, '2020-01-17', 'Отлично'),
		  (964183649, 17, '2020-01-17', 'Отлично'),
		  (976245726, 17, '2020-01-17', 'Хорошо'),
		  (912345678, 18, '2020-01-18', 'Хорошо'),
		  (929475527, 18, '2020-01-18', 'Отлично'),
		  (964183649, 18, '2020-01-18', 'Отлично'),
		  (976245726, 18, '2020-01-18', 'Хорошо'),
		  (912345678, 19, '2019-12-21', 'Не зачёт'),
		  (929475527, 19, '2019-12-21', 'Зачёт'),
		  (964183649, 19, '2019-12-21', 'Зачёт'),
		  (976245726, 19, '2019-12-21', 'Не зачёт'),
		  (912345678, 20, '2019-12-25', 'Не зачёт'),
		  (929475527, 20, '2019-12-25', 'Зачёт'),
		  (964183649, 20, '2019-12-25', 'Зачёт'),
		  (976245726, 20, '2019-12-25', 'Не зачёт'),

--2й семестр.
		  (612345678, 5, '2020-06-25', 'Отлично'),
		  (623154849, 5, '2020-06-25', 'Отлично'),
		  (653490642, 5, '2020-06-25', 'Отлично'),
		  (642567256, 5, '2020-06-25', 'Хорошо'),
		  (712345678, 5, '2020-06-26', 'Хорошо'),
		  (793765913, 5, '2020-06-26', 'Отлично'),
		  (742582342, 5, '2020-06-26', 'Хорошо'),
		  (768441359, 5, '2020-06-26', 'Хорошо'),
		  (612345678, 6, '2020-06-26', 'Отлично'),
		  (623154849, 6, '2020-06-26', 'Отлично'),
		  (653490642, 6, '2020-06-26', 'Отлично'),
		  (642567256, 6, '2020-06-26', 'Хорошо'),
		  (712345678, 6, '2020-06-25', 'Хорошо'),
		  (793765913, 6, '2020-06-25', 'Отлично'),
		  (742582342, 6, '2020-06-25', 'Хорошо'),
		  (768441359, 6, '2020-06-25', 'Хорошо'),
		  (612345678, 7, '2019-12-24', 'Зачёт'),
		  (623154849, 7, '2019-12-24', 'Зачёт'),
		  (653490642, 7, '2019-12-24', 'Зачёт'),
		  (642567256, 7, '2019-12-24', 'Не зачёт'),
		  (712345678, 7, '2019-12-21', 'Зачёт'),
		  (793765913, 7, '2019-12-21', 'Не зачёт'),
		  (742582342, 7, '2019-12-21', 'Зачёт'),
		  (768441359, 7, '2019-12-21', 'Не зачёт'),
		  (612345678, 8, '2020-06-20', 'Зачёт'),
		  (623154849, 8, '2020-06-20', 'Зачёт'),
		  (653490642, 8, '2020-06-20', 'Зачёт'),
		  (642567256, 8, '2020-06-20', 'Не зачёт'),
		  (712345678, 8, '2020-06-22', 'Зачёт'),
		  (793765913, 8, '2020-06-22', 'Зачёт'),
		  (742582342, 8, '2020-06-22', 'Зачёт'),
		  (768441359, 8, '2020-06-22', 'Не зачёт'),

		  (812345678, 13, '2020-01-17', 'Хорошо'),
		  (834147359, 13, '2020-01-17', 'Отлично'),
		  (856275025, 13, '2020-01-17', 'Отлично'),
		  (841515457, 13, '2020-01-17', 'Отлично'),
		  (812345678, 14, '2020-06-28', 'Хорошо'),
		  (834147359, 14, '2020-06-28', 'Отлично'),
		  (856275025, 14, '2020-06-28', 'Отлично'),
		  (841515457, 14, '2020-06-28', 'Отлично'),
		  (812345678, 15, '2019-12-25', 'Не зачёт'),
		  (834147359, 15, '2019-12-25', 'Зачёт'),
		  (856275025, 15, '2019-12-25', 'Зачёт'),
		  (841515457, 15, '2019-12-25', 'Зачёт'),		  
		  (812345678, 16, '2020-06-21', 'Не зачёт'),
		  (834147359, 16, '2020-06-21', 'Зачёт'),
		  (856275025, 16, '2020-06-21', 'Зачёт'),
		  (841515457, 16, '2020-06-21', 'Зачёт'),

		  (912345678, 21, '2020-06-27', 'Хорошо'),
		  (929475527, 21, '2020-06-27', 'Отлично'),
		  (964183649, 21, '2020-06-27', 'Отлично'),
		  (976245726, 21, '2020-06-27', 'Хорошо'),
		  (912345678, 22, '2020-06-28', 'Хорошо'),
		  (929475527, 22, '2020-06-28', 'Отлично'),
		  (964183649, 22, '2020-06-28', 'Отлично'),
		  (976245726, 22, '2020-06-28', 'Хорошо'),
		  (912345678, 23, '2020-06-23', 'Зачёт'),
		  (929475527, 23, '2020-06-23', 'Зачёт'),
		  (964183649, 23, '2020-06-23', 'Зачёт'),
		  (976245726, 23, '2020-06-23', 'Не зачёт'),
		  (912345678, 24, '2020-06-21', 'Не зачёт'),
		  (929475527, 24, '2020-06-21', 'Зачёт'),
		  (964183649, 24, '2020-06-21', 'Зачёт'),
		  (976245726, 24, '2020-06-21', 'Не зачёт');
-------------------------------------------------------------------------------------------------------------------------------

Create Table Преподавание(
	ID_Дисциплины Int FOREIGN KEY REFERENCES Дисциплины(ID)						  not null,
	[Табельный номер] Int FOREIGN KEY REFERENCES Преподаватели([Табельный номер]) not null
);

Insert Into Преподавание
	Values (1, 666),
		   (2, 333),
		   (3, 555),
		   (4, 666),
		   (5, 666),
		   (6, 222),
		   (7, 666),
		   (8, 111),

		   (9,  666),
		   (10, 222),
		   (11, 555),
		   (12, 666),
		   (13, 666),
		   (14, 111),
		   (15, 444),
		   (16, 222),

		   (17, 555),
		   (18, 666),
		   (19, 666),
		   (20, 333),
		   (21, 666),
		   (22, 222),
		   (23, 666),
		   (24, 111);